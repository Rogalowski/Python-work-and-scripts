{% extends 'base.html' %}
{% load static %}
{% block title %}Football pitch - {{ football_pitch.name }}{% endblock %}
{% block content %}

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-1"></div>
            <div class="col-sm-2 sidenav ct-margin-top">
                {% if upcoming_games %}
                    <h4 style="color: #044304" class="ct-margin-top">Football pitch details</h4>
                    <ul class="list-group">
                        <li class="list-group-item"><b>Pitch
                            type:</b> {{ upcoming_games.first.football_pitch.get_type_display }}</li>
                        <li class="list-group-item"><b>Pitch
                            surface:</b> {{ upcoming_games.first.football_pitch.get_surface_display }}</li>
                        <li class="list-group-item"><b>Locker room:</b>
                            {% if upcoming_games.first.football_pitch.locker_room_available == 1 %}
                                <span class="glyphicon glyphicon-ok" style="color: green"></span>
                            {% else %}
                                <span class="glyphicon glyphicon-remove" style="color: darkred"></span>
                            {% endif %}
                        </li>
                        <li class="list-group-item"><b>Pitch address:</b> {{ upcoming_games.first.football_pitch.city }}, {{ upcoming_games.first.football_pitch.street }}
                        </li>
                        <li class="list-group-item"><b>Pitch
                            description:</b> {{ upcoming_games.first.football_pitch.description }}</li>
                    </ul>
                    <hr>
                    <h4 class="ct-margin-top"><span class="glyphicon glyphicon-bell"></span> Next game on
                        {{ upcoming_games.first.football_pitch.name }} football pitch - <a
                                href="{% url 'game_details' upcoming_games.first.pk %}">show</a></h4>
                    <h5>{% if upcoming_games.first.level == 1 %}
                        <span class="label label-success">{{ upcoming_games.first.get_level_display }}</span>
                    {% elif upcoming_games.first.level == 2 %}
                        <span class="label label-info">{{ upcoming_games.first.get_level_display }}</span>
                    {% elif upcoming_games.first.level == 3 %}
                        <span class="label label-warning">{{ upcoming_games.first.get_level_display }}</span>
                    {% elif upcoming_games.first.level == 4 %}
                        <span class="label label-danger">{{ upcoming_games.first.get_level_display }}</span>
                    {% endif %}
                        <span class="label label-primary">Player count: {{ upcoming_games.first.player_count }}</span>
                    </h5>
                    <h4 style="color: #044304" class="ct-margin-top">Game details</h4>
                    <ul class="list-group">
                        <li class="list-group-item"><b>Football pitch
                            name:</b> {{ upcoming_games.first.football_pitch.name }}</li>
                        <li class="list-group-item"><b>Date:</b> {{ upcoming_games.first.date|date:"d M y" }}</li>
                        <li class="list-group-item"><b>Time:</b> {{ upcoming_games.first.date|time }}</li>
                        <li class="list-group-item"><b>Duration:</b> {{ upcoming_games.first.duration }}</li>
                        <li class="list-group-item"><b>Level:</b> {{ upcoming_games.first.get_level_display }}</li>
                        <li class="list-group-item"><b>Number of players:</b> {{ upcoming_games.first.player_count }}
                        </li>
                        <li class="list-group-item"><b>Age range:</b> {{ upcoming_games.first.player_age_from }}
                            - {{ upcoming_games.first.player_age_to }} </li>
                    </ul>

                {% else %}
                    <h4><span class="glyphicon glyphicon-bell"></span> Next game </h4>
                    <h5 style="color: red"> No upcoming games on {{ football_pitch.name }} football pitch. </h5>
                {% endif %}
            </div>
            <div class="col-sm-1"></div>
            <div class="col-sm-6 ct-margin-top">


                <h2 style="color: #044304" class="ct-margin-top">{{ football_pitch.name|upper }}
                    FOOTBALL PITCH DETAILS</h2>
                <h3 class="ct-margin-top">UPCOMING GAMES</h3>
                <button type="button" class="btn btn-default btn-xs" data-toggle="collapse"
                        data-target="#upcoming-games">
                    Hide games
                </button>
                <hr>
                <div id="upcoming-games" class="collapse in">
                    {% if not upcoming_games %}
                        <h4>No upcoming games on {{ football_pitch.name }} football pitch.</h4>
                    {% else %}
                        <div style="height: 250px;overflow: scroll;">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>Footabll Pitch</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Address</th>
                                    <th>Details</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for upcoming_game in upcoming_games %}
                                    <tr>
                                        <td>{{ upcoming_game.football_pitch.name }}</td>
                                        <td>{{ upcoming_game.date|date:"d M y" }}</td>
                                        <td>{{ upcoming_game.date|time }}</td>
                                        <td>{{ upcoming_game.football_pitch.city }}, {{ upcoming_game.football_pitch.street }}</td>
                                        <td><a class="txtlink"
                                               href="{% url 'game_details' upcoming_game.pk %}">Details</a>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% endif %}
                </div>


                <h3 class="ct-margin-top">GAME HISTORY</h3>
                <button class="btn btn-info btn-xs" data-toggle="collapse" data-target="#demo">Show history</button>
                <hr>

                <div id="demo" class="collapse">
                    {% if not past_games %}
                        <h4>No past games on {{ football_pitch.name }} football pitch.</h4>
                    {% else %}
                        <div style="height: 250px;overflow: scroll;">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>Footabll Pitch</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Address</th>
                                    <th>Details</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for past_game in past_games %}
                                    <tr>
                                        <td>{{ past_game.football_pitch.name }}</td>
                                        <td>{{ past_game.date|date:"d M y" }}</td>
                                        <td>{{ past_game.date|time }}</td>
                                        <td>{{ past_game.football_pitch.city }}, {{ past_game.football_pitch.street }}</td>
                                        <td><a class="txtlink" href="{% url 'game_details' past_game.pk %}">Details</a>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% endif %}
                </div>

                <h3 class="ct-margin-top"><small>{{ football_pitch.name|upper }} FOOTBALL PITCH COMMENTS</small>
                </h3>
                <h5 style="color: #044304">{{ football_pitch.rating|upper }}% of positive comments</h5>
                <hr>
                <p><span class="badge">{{ football_pitch.comments.all.count }}
                </span> Comments about <b>{{ football_pitch.name }}</b> football pitch</p>
                <p><span class="badge" style="background-color: green">{{ positive_comments.count }} </span> positive
                    <span class="badge" style="background-color: darkred">{{ negative_comments.count }} </span> negative
                </p>
                {% if not football_pitch.comments.all %}
                    <h3>No comments yet</h3>
                {% else %}
                    <div style="height: 300px;overflow: scroll;">
                        {% for comment in  football_pitch.comments.all %}
                            <div class="row">
                                <div class="col-sm-1 text-center">
                                    <img src="{% static 'avatar.png' %}" class="img-circle" height="55" width="55"
                                         alt="Avatar">
                                </div>
                                <div class="col-sm-10">
                                    <h5>{{ comment.user }} <small>{{ comment.date_added }}</small>
                                        {% if comment.type == 1 %}
                                            <span class="glyphicon glyphicon-thumbs-up" style="color: green"></span>
                                        {% else %}
                                            <span class="glyphicon glyphicon-thumbs-down" style="color: darkred"></span>
                                        {% endif %}
                                    </h5>
                                    <p>{{ comment.description }}</p><br>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

{% endblock %}
